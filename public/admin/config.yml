backend:
  name: github
  repo: totsupo/totsupo
  branch: main
  base_url: https://totsupo.pages.dev
  auth_endpoint: /api/auth
  squash_merges: true

media_folder: "public/images"
public_folder: ""

publish_mode: editorial_workflow
slug_encoding: ascii

collections:
  - name: news
    label: 記事
    folder: "src/content/news"
    path: "{{year}}/{{month}}/{{day}}-{{slug}}/index"
    media_folder: "images"
    public_folder: "/images"
    format: "frontmatter"
    create: true
    slug: "{{slug}}"
    fields:
      - { name: title,   label: タイトル }
      - name: slug
        label: URL Slug
        widget: string
        hint: "必須形式: YYYYMMDD-slug名（例: 20250609-new-restaurant-opens）日付は公開日と同じにしてください"
        pattern: ['^[0-9]{8}-[a-zA-Z0-9\-_]+$', '形式: YYYYMMDD-slug名（半角英数字とハイフン、アンダースコアのみ）']
        required: true
      - { name: excerpt, label: 概要, widget: text }
      - { name: date,    label: 公開日, widget: datetime }
      - name: category
        label: カテゴリ
        widget: select
        options:
          - { label: "街ネタ", value: "街ネタ" }
          - { label: "開店", value: "開店" }
          - { label: "移転", value: "移転" }
          - { label: "イベント", value: "イベント" }
          - { label: "閉店", value: "閉店" }
          - { label: "子育て", value: "子育て" }
          - { label: "戸塚のどか探訪", value: "戸塚のどか探訪" }
      - { name: image,   label: サムネイル, widget: image }
      - { name: author,  label: 編集者, required: false }
      - name: tags
        label: タグ
        label_singular: タグ
        widget: list
        required: false
        field:
          label: タグ
          name: tag
          widget: string
      - { name: body,    label: 本文, widget: markdown }
  
  - name: categories
    label: カテゴリ管理
    folder: "src/content/categories"
    format: "frontmatter"
    create: true
    identifier_field: name
    slug: "{{slug}}"
    summary: "{{name}}"
    editor:
      preview: false
    fields:
      - { name: name, label: カテゴリ名, widget: string }
      - { name: slug, label: URL Slug, widget: string, pattern: ['^[a-zA-Z0-9\-_]+$', 'URLに使用可能な文字のみ'] }
      - { name: description, label: 説明, widget: text, required: false }
      - { name: order, label: 表示順, widget: number, default: 0, hint: "小さい数字ほど上位に表示" }
